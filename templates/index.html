<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#0056b3">
    <meta name="description" content="Sistema de gesti√≥n de im√°genes LPR para c√°maras de tr√°nsito en Neuqu√©n. Consulta detecciones de patentes, veh√≠culos y eventos.">
    <link rel="canonical" href="{{ request.url }}">
    <meta property="og:title" content="Gesti√≥n de Im√°genes LPR ‚Äî Patentes Fauna NQN">
    <meta property="og:description" content="Sistema de gesti√≥n de im√°genes LPR para c√°maras de tr√°nsito en Neuqu√©n.">
    <meta property="og:type" content="website">
    <meta property="og:image" content="{{ url_for('static', filename='og-image.png', _external=True) }}">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üöó</text></svg>">
    <title>Gesti√≥n de Im√°genes LPR ‚Äî Patentes Fauna NQN</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <a href="#main-content" class="skip-link">Saltar al contenido principal</a>
    <main class="container" id="main-content">
        <div style="text-align:right; margin-bottom: 4px;">
            <a href="{{ url_for('logout') }}" style="font-size:12px; color:#555; text-decoration:none;">Cerrar sesi√≥n</a>
        </div>
        <h1>Gesti√≥n de Im√°genes LPR</h1>

        <div id="stats-bar" class="stats-bar" aria-live="polite">
            <span>Cargando estad√≠sticas‚Ä¶</span>
        </div>

        <div id="latest-thumbnails" class="thumbnail-strip" aria-label="√öltimas detecciones"></div>

        <section id="patent-table-section">
            <div class="time-presets">
                <button class="time-preset-btn" data-preset="1h">√öltima hora</button>
                <button class="time-preset-btn" data-preset="24h">√öltimas 24h</button>
                <button class="time-preset-btn" data-preset="7d">√öltimos 7 d√≠as</button>
                <button class="time-preset-btn" data-preset="clear">Limpiar fechas</button>
            </div>

            <div class="table-controls">
                <input type="text" id="filter-patent" autocomplete="off" placeholder="Patente‚Ä¶" title="Filtrar por patente">
                <input type="text" id="filter-brand" autocomplete="off" placeholder="Marca‚Ä¶" title="Filtrar por marca">
                <input type="text" id="filter-type" autocomplete="off" placeholder="Tipo‚Ä¶" title="Filtrar por tipo">
                <span class="filter-label">Desde</span>
                <input type="date" id="filter-start-date" autocomplete="off" title="Fecha desde">
                <span class="filter-label">Hasta</span>
                <input type="date" id="filter-end-date" autocomplete="off" title="Fecha hasta">
                <button id="clear-all-filters-button">Limpiar</button>
            </div>

            <div class="table-wrapper">
            <table id="patent-table">
                <thead>
                    <tr>
                        <th title="Avistamientos">#</th>
                        <th>Patente</th>
                        <th>Marca</th>
                        <th>Color</th>
                        <th>Tipo</th>
                        <th>Confianza</th>
                        <th>Fecha y Hora</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
            </div>

            <div class="pagination-controls">
                <span id="pagination-info" class="pagination-info"></span>
                <div id="pagination-buttons" class="pagination-buttons"></div>
            </div>
        </section>
    </main>

    <!-- The Modal -->
    <div id="imageModal" class="modal" role="dialog" aria-modal="true" aria-label="Imagen de detecci√≥n">
        <div class="modal-content">
            <button class="close-button"><span aria-hidden="true">&times;</span><span class="sr-only">Cerrar</span></button>
            <div id="browse-filters" class="browse-filters" hidden>
                <label><input type="checkbox" value="vehicle_detection"> Detecci√≥n</label>
                <label><input type="checkbox" value="vehicle_picture" checked> Veh√≠culo</label>
                <label><input type="checkbox" value="plate"> Patente</label>
            </div>
            <div id="modal-spinner" class="modal-spinner" hidden></div>
            <div class="carousel-wrapper">
                <button class="carousel-btn carousel-prev"><span aria-hidden="true">&#8249;</span><span class="sr-only">Anterior</span></button>
                <img id="modalImage" src="" alt="Imagen de Patente">
                <button class="carousel-btn carousel-next"><span aria-hidden="true">&#8250;</span><span class="sr-only">Siguiente</span></button>
            </div>
            <span id="carousel-counter" class="carousel-counter"></span>
            <p id="carousel-caption" class="carousel-caption"></p>
            <p id="modal-error" class="modal-error" aria-live="polite" hidden></p>
        </div>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
